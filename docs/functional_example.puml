@startuml functional_example

/'
https://github.com/heig-vd-dai-course/heig-vd-dai-course/blob/main/06.01-define-an-application-protocol/03-solution/01-guess-the-number-game/README.md
'/

actor Bob as Player1 #PaleGreen
Participant Server #OrangeRed
actor Alice as Player2 #PaleTurquoise


autonumber

group Connexion
    Player1 -> Server : Establish connection
    Server -> Player1 : Connection established
    Player2 -> Server : Establish connection
    Server -> Player2 : Connection established
end

group Define username
    Player1 -> Server : USERNAME Bob
    Server -> Player1 : OK
    Player2 -> Server : USERNAME Alice
    Server -> Player2 : OK
end

group Create a game
    Player1 -> Server : CREATE
    Server -> Player1 : OK
end

group Join the game
    Player2 -> Server : JOIN 
    Server -> Player2 : OK
end

note across : The server now selects the player \n who starts randomly.

note left of Player1
    Bob starts
    the game
endnote

group Game init
    Server -> Player1 : STATS Bob 56 Alice 58
    Server -> Player2 : STATS Bob 56 Alice 58
end

group Game
    Player1 -> Server : ATTACK
    Server -> Player1 : HIT Alice 12
    Server -> Player2 : HIT Alice 12
    Player2 -> Server : HEAL
    Server -> Player1 : HEALED Alice 3
    Server -> Player2 : HEALED Alice 3
    note across : Game continues...
    ...

    Player2 -> Server : ATTACK Bob 14
    Server -> Player1 : LOST Bob
    Server -> Player2 : LOST Bob

end

/'
loop 
    Server -> Player1
end

note right of Player2
    help
endnote
'/

@endum